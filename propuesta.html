<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Propuesta - Portal de Becas UTN</title>

  <!-- Proyecto estilos -->
  <link rel="stylesheet" href="css/tailwind.css">
  <link rel="stylesheet" href="css/custom.css">
  <link rel="stylesheet" href="css/propuesta.css">

  
  <style>
    /* Estilos adicionales para propuesta */
    .step-circle { transition: all .25s ease; }
    .step-line { height: 8px; border-radius: 999px; background: #e6e9ee; overflow: hidden; }
    .step-line > .step-line-fill { height: 100%; background: var(--utn-azul); width: 0%; transition: width .5s ease; }

    /* Tarjetas multimedia */
    .media-card { border-radius: 12px; border: 1px solid #e6e6e9; background: #fff; padding: 1rem; box-shadow: 0 6px 18px rgba(0,0,0,0.06); }
    .media-placeholder { width: 100%; height: 100%; display:flex; align-items:center; justify-content:center; color: #94a3b8; font-style: italic; }

    /* Contenedor principal ancho max mejor lectura */
    main.container { max-width:1100px; }

    /* Ajustes menores para el select y barra */
    #estadoBeca { appearance: none; -webkit-appearance:none; background-image: none; }

    /* Progreso numerico centrado */
    .progress-label { text-align: center; margin-top: .5rem; color: #0b1a33; font-weight:600; }

    /* Responsive tweaks */
    @media (max-width:768px) {
      .step-box { gap: .5rem; }
      .step-line { display:none; }
    }
  </style>
</head>
<body class="bg-slate-50">

  <!-- NAVBAR: usa tus estilos existentes -->
  <header class="site-header">
    <nav class="utn-navbar">
      <div class="container nav-inner">
        <a href="index.html" class="nav-brand">
          <img src="img/logo2.webp" alt="Logo UTN" class="logo-utn"> <span>Portal de Becas UTN</span>
        </a>
        <ul class="nav-links">
          <li><a href="index.html" class="nav-link">Inicio</a></li>
          <li><a href="acerca.html" class="nav-link">Acerca</a></li>
          <li><a href="contacto.html" class="nav-link">Contacto</a></li>
          <li><a href="propuesta.html" class="nav-link nav-link--active">Propuesta</a></li>
        </ul>
      </div>
    </nav>
  </header>

  <main class="container py-12">

    <!-- título y subtítulo -->
    <section class="text-center mb-8">
      <h1 class="text-3xl font-bold text-[var(--utn-azul-oscuro)]">Propuesta</h1>
      <p class="text-slate-700 max-w-2xl mx-auto mt-2">Simulación del sistema de seguimiento de becas UTN</p>
    </section>

    <!-- tarjeta principal con stepper y control -->
    <section class="bg-white rounded-2xl shadow-md p-8 mb-8">
  <p class="text-slate-700">
    Esta sección muestra una versión simplificada del proceso que sigue una
    <strong>solicitud de beca</strong> desde el envío inicial, pasando por la revisión,
    hasta obtener un resultado final.
  </p>

  <!-- Stepper -->
<div id="stepperContainer" class="w-full px-10 py-4">
  <div class="relative flex items-center justify-between w-full">

    <!-- Línea gris (fondo) -->
    <div class="absolute left-0 top-1/2 w-full h-1 -translate-y-1/2 bg-gray-300 z-0"></div>

    <!-- Línea animada -->
    <div id="lineProgress"
        class="absolute left-0 top-1/2 h-1 -translate-y-1/2 bg-gray-900 z-10 duration-500"
        style="width:0%; transition-property: width;">
    </div>

    <!-- STEP 1 -->
    <div class="relative z-20 grid w-10 h-10 font-bold text-white bg-gray-900 rounded-full place-items-center">
      1
      <div class="step-label">
        <h6 class="font-semibold text-gray-700">Envío</h6>
        <p class="text-gray-700 text-sm">Formulario de datos</p>
    </div>
    </div>

    <!-- STEP 2 -->
    <div id="step2circle"
         class="relative z-20 grid w-10 h-10 font-bold text-gray-900 bg-gray-300 rounded-full place-items-center">
      2
      <div class="step-label">
        <h6 class="font-semibold text-gray-700">Envío</h6>
        <p class="text-gray-700 text-sm">Formulario de datos</p>
    </div>
    </div>

    <!-- STEP 3 -->
    <div id="step3circle"
         class="relative z-20 grid w-10 h-10 font-bold text-gray-900 bg-gray-300 rounded-full place-items-center">
      3
      <div class="step-label">
        <h6 class="font-semibold text-gray-700">Envío</h6>
        <p class="text-gray-700 text-sm">Formulario de datos</p>
    </div>
    </div>
  </div>
</div>

  <!-- CONTENIDO DEL PASO -->
  <div id="contenedorPasos" class="mt-20"></div>

  <!-- CONTROLES -->
  <div class="flex justify-between mt-10">
    <button id="btnPrev" class="btn-utn btn-utn-light disabled:opacity-50">
      Anterior
    </button>
    <button id="btnNext" class="btn-utn btn-utn-dark disabled:opacity-50">

      Siguiente
    </button>
</div>

</section>

    


  </main>

  <!-- Multimedia: tarjetas con fondo blanco (sin contenido adicional) -->
  <section class="container grid md:grid-cols-2 gap-8 mb-12 py-12">
    <div class="media-card">
      <img src="img/CuentasBancarias.png" alt="Cuentas Bancarias" class="media-image">
    </div>

    <div class="media-card">
      <img src="img/PagosBeca.jpg" alt="Pagos de la beca" class="media-image">
    </div>
  </section>

  <footer class="footer">
    <div class="container footer-inner">Portal de Becas UTN · ISW-512 Diseño de Aplicaciones Web · 2025</div>
  </footer>

  <!-- Modal -->
  <dialog id="modalEnvio" class="modal">
  <div class="modal-box">
    <h3 class="text-lg font-bold">Datos enviados</h3>

    <p class="py-2"><strong>Nombre:</strong> <span id="mNombre"></span></p>
    <p class="py-2"><strong>Cédula:</strong> <span id="mCedula"></span></p>
    <p class="py-2"><strong>Correo:</strong> <span id="mCorreo"></span></p>
    <p class="py-2"><strong>Beca solicitada:</strong> <span id="mBeca"></span></p>

    <div class="modal-action">
      <button id="modalContinuarBtn" class="btn">Continuar</button>
    </div>
  </div>
</dialog>

  <!-- Scripts -->

 <script>
document.addEventListener("DOMContentLoaded", () => {

  // ELEMENTOS STEP
  const step2 = document.getElementById("step2circle");
  const step3 = document.getElementById("step3circle");
  const lineProgress = document.getElementById("lineProgress");
  const btnPrev = document.getElementById("btnPrev");
  const btnNext = document.getElementById("btnNext");
  const contenedor = document.getElementById("contenedorPasos");
  const modalEnvio = document.getElementById("modalEnvio");

  let paso = 1;
  let datosUsuario = {
    nombre: "",
    cedula: "",
    correo: "",
    beca: ""
  };

  let datosEnviados = false;

  actualizarStepper();
  cargarPaso();

  btnPrev.onclick = () => {
    if (paso > 1) paso--;
    cargarPaso();
    actualizarStepper();
  };

  btnNext.onclick = () => {

    if (paso === 1 && !datosEnviados) {

        // Verifica si hay campos vacíos para dar un mensaje más preciso
        const nombre = document.getElementById("nombre")?.value.trim();
        const cedula = document.getElementById("cedula")?.value.trim();
        const correo = document.getElementById("correo")?.value.trim();
        const beca = document.getElementById("beca")?.value;
        const file = document.getElementById("archivoPDF")?.files[0];

        if (!nombre || !cedula || !correo || !beca || !file) {
            alert("Debe llenar todos los datos y subir el PDF antes de continuar.");
            return;
        }

        // Si llenó todo pero no presionó Enviar, avisar
        alert("Debe presionar el botón ENVIAR antes de continuar.");
        return;
    }

    // Si todo está completo, avanza
    if (paso < 3) paso++;
    cargarPaso();
    actualizarStepper();
};

  /* ---------------------------------------------------------
     ACTUALIZA STEPPER VISUAL
  --------------------------------------------------------- */
  function actualizarStepper() {
    lineProgress.style.width = "0%";

    step2.className = "relative z-20 grid w-10 h-10 font-bold bg-gray-300 text-gray-900 rounded-full place-items-center";
    step3.className = "relative z-20 grid w-10 h-10 font-bold bg-gray-300 text-gray-900 rounded-full place-items-center";

    if (paso >= 2) {
      step2.classList.add("bg-gray-900", "text-white");
      lineProgress.style.width = "50%";
    }
    if (paso === 3) {
      step3.classList.add("bg-gray-900", "text-white");
      lineProgress.style.width = "100%";
    }

    btnPrev.disabled = paso === 1;
    btnNext.disabled = (paso === 1 && !datosEnviados);
  }

  /* ---------------------------------------------------------
     PASO 1 — FORMULARIO
  --------------------------------------------------------- */
  function cargarPaso1() {
    contenedor.innerHTML = `
      <div class="p-6 bg-white rounded-xl shadow">
        <h2 class="text-xl font-bold mb-4">Datos del solicitante</h2>

        <label>Nombre y apellido:</label>
        <input id="nombre" type="text" class="input-utn mb-3">

        <label>Cédula:</label>
        <input id="cedula" type="text" class="input-utn mb-3">

        <label>Correo electrónico:</label>
        <input id="correo" type="email" class="input-utn mb-3">

        <label>Tipo de beca:</label>
        <select id="beca" class="input-utn mb-4">
          <option value="">Seleccione la beca</option>
          <option value="Socioeconómica">Beca socioeconómica</option>
          <option value="Alimentación">Beca de alimentación</option>
          <option value="Residencial">Beca de apoyo residencial</option>
        </select>

        <label>Subir archivo probatorio (PDF):</label>
        <input id="archivoPDF" type="file" accept="application/pdf" class="input-utn">

        <button id="btnEnviar" class="mt-6 w-full btn-utn btn-utn-dark">Enviar</button>
      </div>
    `;

    // Repoblar valores si existen
    document.getElementById("nombre").value = datosUsuario.nombre;
    document.getElementById("cedula").value = datosUsuario.cedula;
    document.getElementById("correo").value = datosUsuario.correo;
    document.getElementById("beca").value = datosUsuario.beca;

    // BOTÓN ENVIAR
    document.getElementById("btnEnviar").onclick = () => {

      const nombre = document.getElementById("nombre").value.trim();
      const cedula = document.getElementById("cedula").value.trim();
      const correo = document.getElementById("correo").value.trim();
      const beca = document.getElementById("beca").value;
      const archivo = document.getElementById("archivoPDF").files[0];

      if (!nombre || !cedula || !correo || !beca || !archivo) {
        alert("Debe completar todos los campos.");
        return;
      }
      if (archivo.type !== "application/pdf") {
        alert("Solo se admiten archivos PDF.");
        return;
      }

      // Guardar datos
      datosUsuario = { nombre, cedula, correo, beca };
      datosEnviados = true;

      // Insertar datos en modal
      document.getElementById("mNombre").textContent = nombre;
      document.getElementById("mCedula").textContent = cedula;
      document.getElementById("mCorreo").textContent = correo;
      document.getElementById("mBeca").textContent = beca;

      modalEnvio.showModal();
    };

    document.getElementById("modalContinuarBtn").onclick = () => {
      modalEnvio.close();
      paso = 2;
      cargarPaso();
      actualizarStepper();
    };
  }

  /* ---------------------------------------------------------
     PASO 2 — REVISIÓN
  --------------------------------------------------------- */
  let estadoRevision = "pendiente";

  function cargarPaso2() {
    let html = `
      <div class="bg-white p-6 shadow rounded-xl mb-4">
        <h2 class="text-xl font-bold mb-2">Estado de revisión</h2>
    `;

    if (estadoRevision === "pendiente") {
      const dias = Math.floor(Math.random() * 4) + 2;
      html += `
        <p class="text-gray-700 mb-4">
          La solicitud está <strong>pendiente</strong> de revisión.<br>
          Tiempo estimado: ${dias} días.
        </p>`;
    }

    if (estadoRevision === "pausa") {
      html += `
        <p class="text-gray-700 mb-3">
          La revisión está <strong>en pausa</strong>. Falta la documentación de bienes inmuebles.
        </p>
        <label>Subir PDF faltante:</label>
        <input id="archivoExtra" type="file" accept="application/pdf" class="input-utn mb-3">
        <button id="btnSubirExtra" class="btn-utn btn-utn-dark">Enviar documento</button>
      `;
    }

    if (estadoRevision === "finalizada") {
      const hora = new Date().toLocaleTimeString();
      html += `
        <p class="text-gray-700 mb-4">
          La revisión finalizó a las <strong>${hora}</strong>.
        </p>`;
    }

    html += `
      <div class="mt-6 simulacion-opciones">
        <button id="btnSimPendiente" class="btn-utn btn-utn-light">Simular pendiente</button>
        <button id="btnSimPausa" class="btn-utn btn-utn-light">Simular pausa</button>
        <button id="btnSimFinal" class="btn-utn btn-utn-light">Simular finalizada</button>
      </div>
      </div>
    `;

    contenedor.innerHTML = html;

    // Eventos simulación
    document.getElementById("btnSimPendiente").onclick = () => { estadoRevision = "pendiente"; cargarPaso2(); };
    document.getElementById("btnSimPausa").onclick = () => { estadoRevision = "pausa"; cargarPaso2(); };
    document.getElementById("btnSimFinal").onclick = () => { estadoRevision = "finalizada"; cargarPaso2(); };

    // Subir extra
    if (estadoRevision === "pausa") {
      document.getElementById("btnSubirExtra").onclick = () => {
        const f = document.getElementById("archivoExtra").files[0];
        if (!f || f.type !== "application/pdf") {
          alert("Debe subir un PDF válido.");
          return;
        }
        estadoRevision = "pendiente";
        cargarPaso2();
      };
    }
  }

  /* ---------------------------------------------------------
     PASO 3 — RESULTADO
  --------------------------------------------------------- */
  let resultadoFinal = "rechazada";

  function cargarPaso3() {
    contenedor.innerHTML = `
      <div class="bg-white p-6 shadow rounded-xl">
        <h2 class="text-xl font-bold mb-4">Resultado de la solicitud</h2>

        <p><strong>Estado final:</strong> ${resultadoFinal === "aceptada" ? "Aceptada" : "Rechazada"}</p>

        ${resultadoFinal === "rechazada"
          ? `<p class="text-red-600 font-semibold">Motivo: Documentación errónea.</p>`
          : `<p class="text-green-700 font-semibold">La solicitud fue aceptada.</p>`
        }

        <hr class="my-4">

        <h3 class="font-bold mb-2">Datos ingresados</h3>
        <p><strong>Nombre:</strong> ${datosUsuario.nombre}</p>
        <p><strong>Cédula:</strong> ${datosUsuario.cedula}</p>
        <p><strong>Correo:</strong> ${datosUsuario.correo}</p>
        <p><strong>Beca:</strong> ${datosUsuario.beca}</p>

        <div class="mt-6 resultado-opciones">
          <button id="btnSetAceptar" class="btn-utn btn-utn-green">Simular Aceptada</button>
          <button id="btnSetRechazar" class="btn-utn btn-utn-red">Simular Rechazada</button>
        </div>
      </div>
    `;

    document.getElementById("btnSetAceptar").onclick = () => { resultadoFinal = "aceptada"; cargarPaso3(); };
    document.getElementById("btnSetRechazar").onclick = () => { resultadoFinal = "rechazada"; cargarPaso3(); };
  }

  /* CARGADOR GENERAL */
  function cargarPaso() {
    if (paso === 1) cargarPaso1();
    if (paso === 2) cargarPaso2();
    if (paso === 3) cargarPaso3();
  }

});
</script>



</body>
</html>
