<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Propuesta - Portal de Becas UTN</title>

  <!-- Proyecto estilos -->
  <link rel="stylesheet" href="css/tailwind.css">
  <link rel="stylesheet" href="css/custom.css">
  <link rel="stylesheet" href="css/propuesta.css">
  <style>
    /* Estilos adicionales para propuesta */
    .step-circle { transition: all .25s ease; }
    .step-line { height: 8px; border-radius: 999px; background: #e6e9ee; overflow: hidden; }
    .step-line > .step-line-fill { height: 100%; background: var(--utn-azul); width: 0%; transition: width .5s ease; }

    /* Tarjetas multimedia */
    .media-card { border-radius: 12px; border: 1px solid #e6e6e9; background: #fff; padding: 1rem; box-shadow: 0 6px 18px rgba(0,0,0,0.06); }
    .media-placeholder { width: 100%; height: 100%; display:flex; align-items:center; justify-content:center; color: #94a3b8; font-style: italic; }

    /* Contenedor principal ancho max mejor lectura */
    main.container { max-width:1100px; }

    /* Ajustes menores para el select y barra */
    #estadoBeca { appearance: none; -webkit-appearance:none; background-image: none; }

    /* Progreso numerico centrado */
    .progress-label { text-align: center; margin-top: .5rem; color: #0b1a33; font-weight:600; }

    /* Responsive tweaks */
    @media (max-width:768px) {
      .step-box { gap: .5rem; }
      .step-line { display:none; }
    }
  </style>
</head>
<body class="bg-slate-50">

  <!-- NAVBAR: usa tus estilos existentes -->
  <header class="site-header">
    <nav class="utn-navbar">
      <div class="container nav-inner">
        <a href="index.html" class="nav-brand">
          <img src="img/logo2.webp" alt="Logo UTN" class="logo-utn"> <span>Portal de Becas UTN</span>
        </a>
        <ul class="nav-links">
          <li><a href="index.html" class="nav-link">Inicio</a></li>
          <li><a href="acerca.html" class="nav-link">Acerca</a></li>
          <li><a href="contacto.html" class="nav-link">Contacto</a></li>
          <li><a href="propuesta.html" class="nav-link nav-link--active">Propuesta</a></li>
        </ul>
      </div>
    </nav>
  </header>

  <main class="container py-12">

    <!-- título y subtítulo -->
    <section class="text-center mb-8">
      <h1 class="text-3xl font-bold text-[var(--utn-azul-oscuro)]">Propuesta</h1>
      <p class="text-slate-700 max-w-2xl mx-auto mt-2">Simulación del sistema de seguimiento de becas UTN</p>
    </section>

    <!-- tarjeta principal con stepper y control -->
    <section class="bg-white rounded-2xl shadow-md p-8 mb-8">
  <p class="text-slate-700">
    Esta sección muestra una versión simplificada del proceso que sigue una
    <strong>solicitud de beca</strong> desde el envío inicial, pasando por la revisión,
    hasta obtener un resultado final.
  </p>

  <!-- Stepper -->
<div id="stepperContainer" class="w-full px-10 py-4">
  <div class="relative flex items-center justify-between w-full">

    <!-- Línea gris (fondo) -->
    <div class="absolute left-0 top-1/2 w-full h-1 -translate-y-1/2 bg-gray-300 z-0"></div>

    <!-- Línea animada -->
    <div id="lineProgress"
        class="absolute left-0 top-1/2 h-1 -translate-y-1/2 bg-gray-900 z-10 duration-500"
        style="width:0%; transition-property: width;">
    </div>

    <!-- STEP 1 -->
    <div class="relative z-20 grid w-10 h-10 font-bold text-white bg-gray-900 rounded-full place-items-center">
      1
      <div class="step-label">
        <h6 class="font-semibold text-gray-700">Envío</h6>
        <p class="text-gray-700 text-sm">Formulario de datos</p>
    </div>
    </div>

    <!-- STEP 2 -->
    <div id="step2circle"
         class="relative z-20 grid w-10 h-10 font-bold text-gray-900 bg-gray-300 rounded-full place-items-center">
      2
      <div class="step-label">
        <h6 class="font-semibold text-gray-700">Envío</h6>
        <p class="text-gray-700 text-sm">Formulario de datos</p>
    </div>
    </div>

    <!-- STEP 3 -->
    <div id="step3circle"
         class="relative z-20 grid w-10 h-10 font-bold text-gray-900 bg-gray-300 rounded-full place-items-center">
      3
      <div class="step-label">
        <h6 class="font-semibold text-gray-700">Envío</h6>
        <p class="text-gray-700 text-sm">Formulario de datos</p>
    </div>
    </div>
  </div>
</div>

  <!-- CONTENIDO DEL PASO -->
  <div id="contenedorPasos" class="mt-20"></div>

  <!-- CONTROLES -->
  <div class="flex justify-between mt-10">
    <button id="btnPrev" class="rounded-lg bg-gray-900 py-3 px-6 text-xs font-bold uppercase text-white disabled:opacity-50">
      Anterior
    </button>
    <button id="btnNext" class="rounded-lg bg-gray-900 py-3 px-6 text-xs font-bold uppercase text-white disabled:opacity-50">
      Siguiente
    </button>
</div>

</section>

    <!-- Multimedia
    <section class="grid md:grid-cols-2 gap-8 mb-12">
  <div class="media-card">
    <h3 class="text-lg font-bold text-[var(--utn-azul-oscuro)] mb-3">Imagen explicativa</h3>
    <div class="media-placeholder p-8 border border-dashed border-slate-300 rounded-xl">
    imagen
    </div>
  </div>

  <div class="media-card">
    <h3 class="text-lg font-bold text-[var(--utn-azul-oscuro)] mb-3">Video corto</h3>
    <div class="media-placeholder p-8 border border-dashed border-slate-300 rounded-xl">
       video
    </div>
  </div>
</section> -->


  </main>

  <footer class="footer">
    <div class="container footer-inner">Portal de Becas UTN · ISW-512 Diseño de Aplicaciones Web · 2025</div>
  </footer>

  <!-- Modal -->
  <dialog id="modalEnvio" class="modal">
  <div class="modal-box">
    <h3 class="text-lg font-bold">Envío realizado</h3>
    <p class="py-4">Los datos fueron enviados correctamente.</p>
    <div class="modal-action">
      <form method="dialog">
        <button class="btn">Cerrar</button>
      </form>
    </div>
  </div>
</dialog>

  <!-- Scripts -->

  <script>
document.addEventListener("DOMContentLoaded", () => {

  // ELEMENTOS DEL STEPPER
  const step2 = document.getElementById("step2circle");
  const step3 = document.getElementById("step3circle");
  const lineProgress = document.getElementById("lineProgress");
  const btnPrev = document.getElementById("btnPrev");
  const btnNext = document.getElementById("btnNext");
  const contenedor = document.getElementById("contenedorPasos");

  let paso = 1;
  let datosUsuario = {};

  actualizarStepper();
  cargarPaso();

  btnPrev.onclick = () => {
    if (paso > 1) paso--;
    actualizarStepper();
    cargarPaso();
  };

  btnNext.onclick = () => {
    if (paso < 3) paso++;
    actualizarStepper();
    cargarPaso();
  };

  function actualizarStepper() {
    lineProgress.style.width = "0%";
    step2.classList.remove("bg-gray-900", "text-white");
    step3.classList.remove("bg-gray-900", "text-white");

    step2.classList.add("bg-gray-300", "text-gray-900");
    step3.classList.add("bg-gray-300", "text-gray-900");

    if (paso >= 2) {
      step2.classList.add("bg-gray-900", "text-white");
      lineProgress.style.width = "50%";
    }
    if (paso === 3) {
      step3.classList.add("bg-gray-900", "text-white");
      lineProgress.style.width = "100%";
    }
  }

  function cargarPaso() {
    if (paso === 1) cargarPaso1();
    if (paso === 2) cargarPaso2();
    if (paso === 3) cargarPaso3();

    btnPrev.disabled = paso === 1;
    btnNext.disabled = false;
  }

  /* =======================================================
     PASO 1 – ENVÍO
  ======================================================= */
  function cargarPaso1() {
    contenedor.innerHTML = `
      <div class="p-6 bg-white rounded-xl shadow">
        <h2 class="text-xl font-bold mb-4">Datos del solicitante</h2>

        <label>Nombre y apellido:</label>
        <input id="nombre" type="text" class="input-utn mb-3" placeholder="Ej: Juan Pérez">

        <label>Cédula:</label>
        <input id="cedula" type="text" class="input-utn mb-3">

        <label>Correo electrónico:</label>
        <input id="correo" type="email" class="input-utn mb-3">

        <label>Tipo de beca:</label>
        <select id="beca" class="input-utn mb-4">
          <option value="Socioeconómica">Beca socioeconómica</option>
          <option value="Alimentación">Beca de alimentación</option>
          <option value="Residencial">Beca de apoyo residencial</option>
        </select>

        <label>Subir archivo probatorio de datos:</label>
        <input id="archivoPDF" type="file" accept="application/pdf" class="input-utn">

        <button id="btnEnviar" class="mt-6 w-full rounded-lg bg-gray-900 text-white py-2">Enviar</button>
      </div>
    `;

    document.getElementById("btnEnviar").onclick = () => {
      const file = document.getElementById("archivoPDF").files[0];
      if (!file || file.type !== "application/pdf") {
        alert("Solo se permiten archivos PDF.");
        return;
      }

      datosUsuario = {
        nombre: document.getElementById("nombre").value,
        cedula: document.getElementById("cedula").value,
        correo: document.getElementById("correo").value,
        beca: document.getElementById("beca").value
      };

      document.getElementById("modalEnvio").showModal();
    };
  }

  /* =======================================================
     PASO 2 – REVISIÓN
  ======================================================= */
  let estadoRevision = "pendiente"; // pendiente | pausa | finalizada

  function cargarPaso2() {
    let html = "";

    html += `
      <div class="bg-white p-6 shadow rounded-xl mb-4">
        <h2 class="text-xl font-bold mb-2">Estado de revisión</h2>
    `;

    if (estadoRevision === "pendiente") {
      const dias = Math.floor(Math.random() * 4) + 2;
      html += `
        <p class="text-gray-700 mb-4">
          La solicitud está <strong>pendiente</strong> de revisión.<br>
          Tiempo estimado: ${dias} días.
        </p>
      `;
    }

    if (estadoRevision === "pausa") {
      html += `
        <p class="text-gray-700 mb-3">
          La revisión está <strong>en pausa</strong> debido a documentación faltante:<br>
          <strong>Documentación de bienes inmuebles</strong>.
        </p>

        <label>Subir documento PDF faltante:</label>
        <input id="archivoExtra" type="file" accept="application/pdf" class="input-utn mb-3">

        <button id="btnSubirExtra" class="bg-gray-900 text-white px-4 py-2 rounded-lg">
          Enviar y continuar revisión
        </button>
      `;
    }

    if (estadoRevision === "finalizada") {
      const hora = new Date().toLocaleTimeString();
      html += `
        <p class="text-gray-700 mb-4">
          La revisión finalizó a las <strong>${hora}</strong>.
          Presione siguiente para ver el resultado.
        </p>
      `;
    }

    // BOTONES DE SIMULACIÓN
    html += `
      <div class="mt-6 flex gap-3">
        <button id="btnSimPendiente" class="px-4 py-2 rounded bg-gray-300">Simular pendiente</button>
        <button id="btnSimPausa" class="px-4 py-2 rounded bg-gray-300">Simular pausa</button>
        <button id="btnSimFinal" class="px-4 py-2 rounded bg-gray-300">Simular finalizada</button>
      </div>
    `;

    html += `</div>`;

    contenedor.innerHTML = html;

    // EVENTOS
    document.getElementById("btnSimPendiente").onclick = () => { estadoRevision = "pendiente"; cargarPaso2(); };
    document.getElementById("btnSimPausa").onclick = () => { estadoRevision = "pausa"; cargarPaso2(); };
    document.getElementById("btnSimFinal").onclick = () => { estadoRevision = "finalizada"; cargarPaso2(); };

    const extra = document.getElementById("btnSubirExtra");
    if (extra) {
      extra.onclick = () => {
        const file = document.getElementById("archivoExtra").files[0];
        if (!file || file.type !== "application/pdf") {
          alert("El archivo debe ser PDF.");
          return;
        }
        estadoRevision = "pendiente";
        cargarPaso2();
      };
    }
  }

  /* =======================================================
     PASO 3 – RESULTADO
  ======================================================= */
  let resultadoFinal = "rechazada"; // aceptada | rechazada

  function cargarPaso3() {
    contenedor.innerHTML = `
      <div class="bg-white p-6 shadow rounded-xl">
        <h2 class="text-xl font-bold mb-4">Resultado de la solicitud</h2>

        <p class="mb-3">
          Estado final:
          <strong>${resultadoFinal === "aceptada" ? "Aceptada" : "Rechazada"}</strong>
        </p>

        ${resultadoFinal === "rechazada"
          ? `<p class="text-red-600 font-semibold">Motivo: Documentación errónea.</p>`
          : `<p class="text-green-700 font-semibold">La solicitud fue aceptada correctamente.</p>`
        }

        <hr class="my-4">

        <h3 class="font-bold mb-2">Datos del solicitante:</h3>
        <p><strong>Nombre:</strong> ${datosUsuario.nombre}</p>
        <p><strong>Cédula:</strong> ${datosUsuario.cedula}</p>
        <p><strong>Correo:</strong> ${datosUsuario.correo}</p>
        <p><strong>Beca solicitada:</strong> ${datosUsuario.beca}</p>

        <div class="mt-6 flex gap-3">
          <button id="btnSetAceptar" class="px-4 py-2 bg-green-600 text-white rounded">Simular Aceptada</button>
          <button id="btnSetRechazar" class="px-4 py-2 bg-red-600 text-white rounded">Simular Rechazada</button>
        </div>
      </div>
    `;

    document.getElementById("btnSetAceptar").onclick = () => {
      resultadoFinal = "aceptada"; cargarPaso3();
    };
    document.getElementById("btnSetRechazar").onclick = () => {
      resultadoFinal = "rechazada"; cargarPaso3();
    };
  }

});
</script>


</body>
</html>
